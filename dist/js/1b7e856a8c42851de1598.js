(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+5i3":function(t,e,s){},Vtdi:function(t,e,s){"use strict";s.r(e);var i=s("gw9Z"),a=s("XEAi"),r=s("n/QL");const c={class:"crypto"},o={class:"crypto__form"},n={class:"form__inputbox"},h=Object(a.i)("div",{class:"form__title"},"Тикер",-1),l={class:"crypto__body"},p={class:"body__search"},d=Object(a.i)("div",{class:"search__icon"},null,-1),b={class:"body__blocks"},u={class:"graph__hover"},g={key:0,class:"body__graph"},O={class:"graph__hover"},_={class:"crypto__pagination"},y={class:"pagination__title"},j={class:"pagination__buttons"};const m={class:"block__title"},k={class:"block__price"};var v={name:"block",data:()=>({value:0}),methods:{},props:{index:Number,name:String,value:Number,id:Number},created(){}},f=s("uaZu"),E=s.n(f);var w=E()(v,[["render",function(t,e,s,c,o,n){return Object(a.v)(),Object(a.h)("div",{onClick:e[1]||(e[1]=(e=>t.$emit("block-clicked",s.id))),class:"block"},[Object(a.i)("div",m,Object(r.M)(s.name),1),Object(a.i)("div",k,Object(r.M)(s.value)+"$",1),Object(a.i)("div",{onClick:e[0]||(e[0]=Object(i.c)(e=>t.$emit("delete-block",s.id),["stop"])),class:"block__icon"})])}]]),C=s("vDqi"),x=s.n(C),P={name:"App",components:{block:w},data:()=>({graphOnFocus:!1,graphCoords:0,windowWidth:0,blockOnFocus:"",dataList:["ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH","ETH"],pageNumber:0,searchCrypto:"",apiKey:"48fa6ac6c3648c1bbc0de21933441e288b8b74efc97c5912a202f7a86a762a52",ws:"",graphData:[],currentData:{},searchTicker:""}),computed:{pageCount(){const t=this.filteredData.length;return Math.ceil(t/6)},paginatedData(){const t=6*this.pageNumber,e=t+6;return this.filteredData.slice(t,e)},filteredData(){return this.dataList.filter(t=>-1!=t.name.toString().toLowerCase().indexOf(this.searchTicker.toString().toLowerCase()))}},watch:{blockOnFocus(){this.graphData=[]}},methods:{checkCrypto(){x.a.get(`https://min-api.cryptocompare.com/data/price?fsym=${this.searchCrypto}&tsyms=USD&api_key=${this.apiKey}`).then(t=>{console.log(t),t.data.USD?(S.push("dataList",{name:this.searchCrypto,value:0}),this.searchCrypto="",this.redrawList()):"Error"==t.data.Response&&(this.searchCrypto="")})},redrawList(){let t=S.get("dataList",!0);t.forEach((t,e)=>{t.index=e}),S.set("dataList",t,!0,!1),console.log(t),this.dataList=t,this.createRequest()},prevPage(){this.pageNumber--,this.blockOnFocus="",this.graphOnFocus=""},nextPage(){this.pageNumber++,this.blockOnFocus="",this.graphOnFocus=""},processBlock(t){this.changeGraphPosition(t),this.blockOnFocus=t},deleteBlock(t){S.splice("dataList",t,1),this.graphData=[],this.blockOnFocus="",this.graphOnFocus="",this.redrawList()},changeGraphPosition(t){this.graphCoords=t+2+"/"+(t+3)},getWidth(){this.windowWidth=document.body.clientWidth},processMessage(t){let e=JSON.parse(t.data);2==e.TYPE&&(this.dataList.forEach(t=>{t.name===e.FROMSYMBOL&&e.PRICE&&(t.value=e.PRICE)}),this.currentData=e,this.checkForGraph(e),S.set("dataList",this.dataList,1,0))},checkForGraph(t){""!==this.blockOnFocus&&t.FROMSYMBOL===this.dataList[this.blockOnFocus].name&&t.PRICE&&(this.graphData.length<20?this.graphData.push(t.PRICE):(this.graphData.shift(),this.graphData.push(t.PRICE)))},calculateBarStyle(t){let e,s=90/this.graphData.length,i=Math.max(...this.graphData),a=Math.min(...this.graphData);return`width: ${s}%; height: ${e=1==this.graphData.length?100:(t-a)/(i-a)*100+10}%;`},createRequest(){let t=[];this.dataList.forEach(e=>{t.push(`2~Coinbase~${e.name}~USD`)});let e={action:"SubAdd",subs:t};this.ws.send(JSON.stringify(e))}},created(){window.addEventListener("resize",t=>{this.getWidth()}),window.dispatchEvent(new Event("resize")),this.dataList=S.set("dataList",[],!1,!0).dataList||S.get("dataList",!0);var t=this,e=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key="+this.apiKey);this.ws=e,e.onopen=function(){t.createRequest()},e.onmessage=function(e){t.processMessage(e)}}};var T=E()(P,[["render",function(t,e,s,m,k,v){const f=Object(a.x)("block");return Object(a.v)(),Object(a.h)("div",c,[Object(a.i)("div",o,[Object(a.i)("div",n,[Object(a.E)(Object(a.i)("input",{"onUpdate:modelValue":e[0]||(e[0]=(t=>k.searchCrypto=t)),type:"text",placeholder:"Например DOGE",class:"form__input"},null,512),[[i.b,k.searchCrypto]]),h]),Object(a.i)("button",{onClick:e[1]||(e[1]=((...t)=>v.checkCrypto&&v.checkCrypto(...t))),class:"form__button"},"Добавить")]),Object(a.i)("div",l,[Object(a.i)("div",p,[Object(a.E)(Object(a.i)("input",{"onUpdate:modelValue":e[2]||(e[2]=(t=>k.searchTicker=t)),type:"text",placeholder:"Найти тикер",class:"search__input"},null,512),[[i.b,k.searchTicker]]),d]),Object(a.i)("div",b,[(Object(a.v)(!0),Object(a.h)(a.b,null,Object(a.w)(v.paginatedData,(t,s)=>(Object(a.v)(),Object(a.f)(f,{class:Object(r.J)([{"block--active":k.blockOnFocus===t.index},"blocks__wrapper"]),onClick:e[3]||(e[3]=(t=>k.graphOnFocus=!0)),onDeleteBlock:v.deleteBlock,onBlockClicked:v.processBlock,index:s+6*k.pageNumber,id:t.index,name:t.name,value:t.value},null,8,["class","onDeleteBlock","onBlockClicked","index","id","name","value"]))),256)),k.graphOnFocus&&k.windowWidth<=460?(Object(a.v)(),Object(a.h)("div",{key:0,style:Object(r.K)(`grid-row:${k.graphCoords}`),class:"body__graph"},[(Object(a.v)(!0),Object(a.h)(a.b,null,Object(a.w)(k.graphData,t=>(Object(a.v)(),Object(a.h)("div",{style:Object(r.K)(v.calculateBarStyle(t)),class:"graph__bar"},[Object(a.i)("div",u,Object(r.M)(t)+"$",1)],4))),256))],4)):Object(a.g)("",!0)]),k.graphOnFocus&&k.windowWidth>460?(Object(a.v)(),Object(a.h)("div",g,[(Object(a.v)(!0),Object(a.h)(a.b,null,Object(a.w)(k.graphData,t=>(Object(a.v)(),Object(a.h)("div",{style:Object(r.K)(v.calculateBarStyle(t)),class:"graph__bar"},[Object(a.i)("div",O,Object(r.M)(t)+"$",1)],4))),256))])):Object(a.g)("",!0)]),Object(a.i)("div",_,[Object(a.i)("div",y,"Показано "+Object(r.M)(v.paginatedData.length)+" результатов из "+Object(r.M)(k.dataList.length),1),Object(a.i)("div",j,[Object(a.i)("div",{onClick:e[4]||(e[4]=((...t)=>v.prevPage&&v.prevPage(...t))),class:Object(r.J)([{"pagination__button--disabled":0==k.pageNumber},"pagination__button pagination__back"])},"Назад",2),Object(a.i)("div",{onClick:e[5]||(e[5]=((...t)=>v.nextPage&&v.nextPage(...t))),class:Object(r.J)([{"pagination__button--disabled":k.pageNumber>=v.pageCount-1},"pagination__button pagination__forward"])},"Вперед",2)])])])}]]);window.S=new class{returnCurrentData(){return localStorage}returnCurrentKeys(){let t=[];for(var e in localStorage)t.push(e);return t}clear(){for(var t in localStorage)localStorage.removeItem(t);return localStorage}_isExist(t){return!!localStorage.getItem(t)}_notExist(t){return console.error(`Item "${t}" does not exist`),!1}get(t,e=!1){if(this._isExist(t)){if(0==e){const e=localStorage.getItem(t);if(this._checkForJson(e)){let s={};return s[t]=this._fromJson(e),s}{let s={};return s[t]=e,s}}{const e=localStorage.getItem(t);return this._checkForJson(e)?this._fromJson(e):e}}return this._notExist(t),!1}put(t,e,s){if(this._isExist(t)){let i=this.get(t);if(this._isTypeCorrect("Object",i[t],"Put")){let a=i[t];a[e]=s,this.set(t,a,!0)}}else this._notExist(t)}setProperty(t,e,s){if(this._isExist(t)){let i=this.get(t),a=i[t];if(!1!==a.hasOwnProperty(e)||!this._isTypeCorrect("Object",i[t],"changeProperty"))return console.error(`Property ${e} already exists`),!1;a[e]=s,i=a,this.set(t,i,!0)}}changeProperty(t,e,s){if(this._isExist(t)){let i=this.get(t),a=i[t];if(!0!==a.hasOwnProperty(e)||!this._isTypeCorrect("Object",i[t],"changeProperty"))return console.error(`Property ${e} does not exists`),!1;a[e]=s,i=a,this.set(t,i,!0)}}checkProperty(t,e){if(this._isExist(t)){let s=this.get(t);return!(!0!==s[t].hasOwnProperty(e)||!this._isTypeCorrect("Object",s[t],"checkProperty"))}}push(t,...e){if(this._isExist(t)){let s=this.get(t);if(this._isTypeCorrect("Array",s[t],"Push")){let i=s[t];return e.forEach(t=>{i.push(t)}),this.set(t,i,!0),this.get(t)}}else this._notExist(t)}splice(t,e,s){if(this._isExist(t)){let i=this.get(t);if(this._isTypeCorrect("Array",i[t],"Splice")){let a=i[t];return a.splice(e,s),this.set(t,a,!0),!0}}else this._notExist(t)}delete(t,e){if(this._isExist(t)){let s=this.get(t);if(this._isTypeCorrect("Object",s[t],"delete")){let i=s[t];delete i[e],this.set(t,i,!0)}}else this._notExist(t)}_isTypeCorrect(t,e,s){let i=Object.prototype.toString.call(e).slice(8,-1);if("String"==i&&(i="Array"),i==t)return!0;this._displayTypeError(s)}_displayTypeError(t){switch(t){case"Push":case"Splice":case"changeProperty":case"setProperty":case"checkProperty":return console.error(t+" method works only with Arrays and Strings, use another method instead"),!1;case"Put":case"Delete":return console.error(t+" method works only with Objects, use another method instead"),!1}}_checkForJson(t){return!!JSON.parse(t)}_toJson(t){return JSON.stringify(t)}_fromJson(t){return JSON.parse(t)}getObj(t){let e={};return e[t]=this._fromJson(this.get(t)[t]),e}set(t,e,s=!1,i=!1){return!this._isExist(t)||this._isExist(t)&&1==s?t?(localStorage.setItem(t,this._toJson(e)),this.get(t)):(console.error("The function must contain arguments"),!1):!(this._isExist(t)&&!0===i||(console.error('Cannot rewrite an existing object, use "force" option instead'),1))}};S;var D=s("7O5W"),L=s("EcpT"),F=s("rT2p");s("+5i3");D.c.add(L.a,L.b);let J=Object(i.a)(T);J.mount("#app"),J.component("font-awesome-icon",F.a)}},[["Vtdi",0,2,10,5,6,8,9,11,12]]]);